{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nlet TrainReservationComponent = class TrainReservationComponent {\n  constructor(http) {\n    this.http = http;\n    this.seats = ['1A', '2A', '3A', '4A', '5A', '6A', '7A', '8A', '9A', '10A', '1B', '2B', '3B', '4B', '5B', '6B', '7B', '8B', '9B', '10B'];\n    this.formData = {\n      name: '',\n      seats: 0\n    };\n    const range = Array.from({\n      length: 80\n    }, (_, i) => i + 1);\n    this.numbers = this.chunkArray(range, 7);\n  }\n  chunkArray(arr, chunkSize) {\n    const chunks = [];\n    for (let i = 0; i < arr.length; i += chunkSize) {\n      chunks.push(arr.slice(i, i + chunkSize));\n    }\n    console.log(chunks);\n    return chunks;\n  }\n  ngOnInit() {\n    this.http.get('https://backend-9a3n.vercel.app/api/v1/user').subscribe(data => {\n      this.available = data;\n      console.log(this.available);\n    });\n  }\n  reserveSeats(numSeats) {\n    let reservedSeats = [];\n    const seatLayout = this.chunkArray(this.available, 7);\n    // Loop through the rows of the seat layout\n    for (let i = 0; i < seatLayout.length; i++) {\n      let row = seatLayout[i];\n      // Check if the row has enough available seats to accommodate the reservation\n      let numAvailableSeats = row.filter(seat => seat === 1).length;\n      if (numAvailableSeats >= numSeats) {\n        // Reserve seats in the same row\n        for (let j = 0; j < row.length && numSeats > 0; j++) {\n          if (row[j] === 1) {\n            reservedSeats.push(i * 7 + j + 1);\n            row[j] = 0; // Mark the seat as reserved\n            numSeats--;\n          }\n        }\n        // If all seats are reserved, return the reserved seat numbers\n        if (numSeats === 0) {\n          return reservedSeats;\n        }\n      }\n    }\n    // If there are not enough available seats in one row, reserve nearby seats\n    for (let i = 0; i < seatLayout.length; i++) {\n      let row = seatLayout[i];\n      for (let j = 0; j < row.length && numSeats > 0; j++) {\n        if (row[j] === 1) {\n          reservedSeats.push(i * 7 + j + 1);\n          row[j] = 0; // Mark the seat as reserved\n          numSeats--;\n        }\n      }\n      // If all seats are reserved, return the reserved seat numbers\n      if (numSeats === 0) {\n        return reservedSeats;\n      }\n    }\n    // If there are no available seats left, return an empty array\n    return reservedSeats;\n  }\n  onSubmit() {\n    if (this.formData.seats > 7) {\n      this.formData.seats = 7;\n    }\n    const numbers = this.reserveSeats(this.formData.seats);\n    console.log(numbers);\n    this.http.post('https://backend-9a3n.vercel.app/api/v1/user', {\n      \"name\": this.formData.name,\n      \"seats\": this.formData.seats,\n      \"numbers\": numbers\n    }).subscribe(response => {\n      console.log(response);\n      window.location.reload();\n    });\n  }\n};\nTrainReservationComponent = __decorate([Component({\n  selector: 'app-train-reservation',\n  templateUrl: './train-reservation.component.html',\n  styleUrls: ['./train-reservation.component.css']\n})], TrainReservationComponent);\nexport { TrainReservationComponent };","map":{"version":3,"mappings":";AAAA,SAASA,SAAS,QAAQ,eAAe;AAOlC,IAAMC,yBAAyB,GAA/B,MAAMA,yBAAyB;EAOpCC,YAAoBC,IAAgB;IAAhB,SAAI,GAAJA,IAAI;IAHxB,UAAK,GAAa,CAAC,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,KAAK,EAC9E,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,KAAK,CAAC;IAuB5D,aAAQ,GAAG;MACTC,IAAI,EAAE,EAAE;MACRC,KAAK,EAAE;KACR;IAvBD,MAAMC,KAAK,GAAGC,KAAK,CAACC,IAAI,CAAC;MAAEC,MAAM,EAAE;IAAE,CAAE,EAAE,CAACC,CAAC,EAAEC,CAAC,KAAKA,CAAC,GAAG,CAAC,CAAC;IACvD,IAAI,CAACC,OAAO,GAAG,IAAI,CAACC,UAAU,CAACP,KAAK,EAAE,CAAC,CAAC;EAC1C;EAEQO,UAAU,CAACC,GAAU,EAAEC,SAAiB;IAC9C,MAAMC,MAAM,GAAG,EAAE;IACjB,KAAK,IAAIL,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGG,GAAG,CAACL,MAAM,EAAEE,CAAC,IAAII,SAAS,EAAE;MAC9CC,MAAM,CAACC,IAAI,CAACH,GAAG,CAACI,KAAK,CAACP,CAAC,EAAEA,CAAC,GAAGI,SAAS,CAAC,CAAC;;IAE1CI,OAAO,CAACC,GAAG,CAACJ,MAAM,CAAC;IACnB,OAAOA,MAAM;EACf;EAEAK,QAAQ;IACN,IAAI,CAAClB,IAAI,CAACmB,GAAG,CAAC,6CAA6C,CAAC,CAACC,SAAS,CAACC,IAAI,IAAG;MAC5E,IAAI,CAACC,SAAS,GAACD,IAAI;MACnBL,OAAO,CAACC,GAAG,CAAC,IAAI,CAACK,SAAS,CAAC;IACjC,CAAC,CAAC;EACA;EAMAC,YAAY,CAACC,QAAgB;IAC3B,IAAIC,aAAa,GAAG,EAAE;IACvB,MAAMC,UAAU,GAAG,IAAI,CAAChB,UAAU,CAAC,IAAI,CAACY,SAAS,EAAE,CAAC,CAAC;IACpD;IACA,KAAK,IAAId,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGkB,UAAU,CAACpB,MAAM,EAAEE,CAAC,EAAE,EAAE;MAC1C,IAAImB,GAAG,GAAGD,UAAU,CAAClB,CAAC,CAAC;MAEvB;MACA,IAAIoB,iBAAiB,GAAGD,GAAG,CAACE,MAAM,CAACC,IAAI,IAAIA,IAAI,KAAK,CAAC,CAAC,CAACxB,MAAM;MAC7D,IAAIsB,iBAAiB,IAAIJ,QAAQ,EAAE;QACjC;QACA,KAAK,IAAIO,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGJ,GAAG,CAACrB,MAAM,IAAIkB,QAAQ,GAAG,CAAC,EAAEO,CAAC,EAAE,EAAE;UACnD,IAAIJ,GAAG,CAACI,CAAC,CAAC,KAAK,CAAC,EAAE;YAChBN,aAAa,CAACX,IAAI,CAACN,CAAC,GAAG,CAAC,GAAGuB,CAAC,GAAG,CAAC,CAAC;YACjCJ,GAAG,CAACI,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;YACZP,QAAQ,EAAE;;;QAId;QACA,IAAIA,QAAQ,KAAK,CAAC,EAAE;UAClB,OAAOC,aAAa;;;;IAK1B;IACA,KAAK,IAAIjB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGkB,UAAU,CAACpB,MAAM,EAAEE,CAAC,EAAE,EAAE;MAC1C,IAAImB,GAAG,GAAGD,UAAU,CAAClB,CAAC,CAAC;MAEvB,KAAK,IAAIuB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGJ,GAAG,CAACrB,MAAM,IAAIkB,QAAQ,GAAG,CAAC,EAAEO,CAAC,EAAE,EAAE;QACnD,IAAIJ,GAAG,CAACI,CAAC,CAAC,KAAK,CAAC,EAAE;UAChBN,aAAa,CAACX,IAAI,CAACN,CAAC,GAAG,CAAC,GAAGuB,CAAC,GAAG,CAAC,CAAC;UACjCJ,GAAG,CAACI,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;UACZP,QAAQ,EAAE;;;MAId;MACA,IAAIA,QAAQ,KAAK,CAAC,EAAE;QAClB,OAAOC,aAAa;;;IAIxB;IACA,OAAOA,aAAa;EACtB;EAEAO,QAAQ;IACN,IAAI,IAAI,CAACC,QAAQ,CAAC/B,KAAK,GAAE,CAAC,EAAC;MACzB,IAAI,CAAC+B,QAAQ,CAAC/B,KAAK,GAAC,CAAC;;IAEvB,MAAMO,OAAO,GAAC,IAAI,CAACc,YAAY,CAAC,IAAI,CAACU,QAAQ,CAAC/B,KAAK,CAAC;IACpDc,OAAO,CAACC,GAAG,CAACR,OAAO,CAAC;IACpB,IAAI,CAACT,IAAI,CAACkC,IAAI,CAAC,6CAA6C,EAAE;MAAC,MAAM,EAAC,IAAI,CAACD,QAAQ,CAAChC,IAAI;MAAC,OAAO,EAAC,IAAI,CAACgC,QAAQ,CAAC/B,KAAK;MAAC,SAAS,EAACO;IAAO,CAAC,CAAC,CAACW,SAAS,CAACe,QAAQ,IAAG;MAC5JnB,OAAO,CAACC,GAAG,CAACkB,QAAQ,CAAC;MACvBC,MAAM,CAACC,QAAQ,CAACC,MAAM,EAAE;IACxB,CAAC,CAAC;EACJ;CAID;AA9FYxC,yBAAyB,eALrCD,SAAS,CAAC;EACT0C,QAAQ,EAAE,uBAAuB;EACjCC,WAAW,EAAE,oCAAoC;EACjDC,SAAS,EAAE,CAAC,mCAAmC;CAChD,CAAC,GACW3C,yBAAyB,CA8FrC;SA9FYA,yBAAyB","names":["Component","TrainReservationComponent","constructor","http","name","seats","range","Array","from","length","_","i","numbers","chunkArray","arr","chunkSize","chunks","push","slice","console","log","ngOnInit","get","subscribe","data","available","reserveSeats","numSeats","reservedSeats","seatLayout","row","numAvailableSeats","filter","seat","j","onSubmit","formData","post","response","window","location","reload","selector","templateUrl","styleUrls"],"sourceRoot":"","sources":["C:\\Users\\darba\\Desktop\\part\\train\\src\\app\\train-reservation\\train-reservation.component.ts"],"sourcesContent":["import { Component } from '@angular/core';\n\n@Component({\n  selector: 'app-train-reservation',\n  templateUrl: './train-reservation.component.html',\n  styleUrls: ['./train-reservation.component.css']\n})\nexport class TrainReservationComponent {\n  numbers: number[][];\n  available : any;\n\n  seats: string[] = ['1A', '2A', '3A', '4A', '5A', '6A', '7A', '8A', '9A', '10A',\n  '1B', '2B', '3B', '4B', '5B', '6B', '7B', '8B', '9B', '10B'];\n\n  constructor(private http: HttpClient) { \n  const range = Array.from({ length: 80 }, (_, i) => i + 1);\n    this.numbers = this.chunkArray(range, 7);\n  }\n  \n  private chunkArray(arr: any[], chunkSize: number): any[][] {\n    const chunks = [];\n    for (let i = 0; i < arr.length; i += chunkSize) {\n      chunks.push(arr.slice(i, i + chunkSize));\n    }\n    console.log(chunks)\n    return chunks;\n  }\n\n  ngOnInit() {\n    this.http.get('https://backend-9a3n.vercel.app/api/v1/user').subscribe(data => {\n      this.available=data\n      console.log(this.available)\n});\n  }\n\n  formData = {\n    name: '',\n    seats: 0\n  };\n  reserveSeats(numSeats: number){\n    let reservedSeats = [];\n   const seatLayout = this.chunkArray(this.available, 7);\n    // Loop through the rows of the seat layout\n    for (let i = 0; i < seatLayout.length; i++) {\n      let row = seatLayout[i];\n  \n      // Check if the row has enough available seats to accommodate the reservation\n      let numAvailableSeats = row.filter(seat => seat === 1).length;\n      if (numAvailableSeats >= numSeats) {\n        // Reserve seats in the same row\n        for (let j = 0; j < row.length && numSeats > 0; j++) {\n          if (row[j] === 1) {\n            reservedSeats.push(i * 7 + j + 1);\n            row[j] = 0; // Mark the seat as reserved\n            numSeats--;\n          }\n        }\n  \n        // If all seats are reserved, return the reserved seat numbers\n        if (numSeats === 0) {\n          return reservedSeats;\n        }\n      }\n    }\n  \n    // If there are not enough available seats in one row, reserve nearby seats\n    for (let i = 0; i < seatLayout.length; i++) {\n      let row = seatLayout[i];\n  \n      for (let j = 0; j < row.length && numSeats > 0; j++) {\n        if (row[j] === 1) {\n          reservedSeats.push(i * 7 + j + 1);\n          row[j] = 0; // Mark the seat as reserved\n          numSeats--;\n        }\n      }\n  \n      // If all seats are reserved, return the reserved seat numbers\n      if (numSeats === 0) {\n        return reservedSeats;\n      }\n    }\n  \n    // If there are no available seats left, return an empty array\n    return reservedSeats\n  }  \n\n  onSubmit() {\n    if((this.formData.seats)>7){\n      this.formData.seats=7\n    }\n    const numbers=this.reserveSeats(this.formData.seats)\n    console.log(numbers)\n    this.http.post('https://backend-9a3n.vercel.app/api/v1/user', {\"name\":this.formData.name,\"seats\":this.formData.seats,\"numbers\":numbers}).subscribe(response => {\n      console.log(response);\n    window.location.reload();\n    });\n  }\n  \n\n\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}